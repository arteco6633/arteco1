# ARTECO CRM

Внутренняя CRM система для управления заказами, пользователями, партнерами и клиентами партнеров.

## Установка

1. Установите зависимости:
```bash
cd crm
npm install
```

2. Создайте файл `.env.local` в папке `crm`:
```env
NEXT_PUBLIC_SUPABASE_URL=https://zijajicude.beget.app
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

3. Запустите сервер разработки:
```bash
npm run dev
```

CRM система будет доступна по адресу: http://localhost:3001

## Функционал

### Дашборд (`/`)
- Общая статистика по всем сущностям
- Количество заказов, пользователей, партнеров, клиентов
- Общая выручка
- Количество ожидающих заказов

### Заказы (`/orders`)
- Список всех заказов
- Фильтрация по статусу (ожидающие, в обработке, доставленные, завершенные, отмененные)
- Информация о клиенте, сумме, способе доставки и оплаты

### Пользователи (`/users`)
- Список всех зарегистрированных пользователей
- Информация о телефоне, имени, дате регистрации

### Партнеры (`/partners`)
- Список всех партнеров
- Информация о типе партнера, статусе активности
- Контактные данные

### Клиенты партнеров (`/clients`)
- Список всех клиентов партнеров
- Связь с партнером
- Заметки и дополнительная информация

## Структура проекта

```
crm/
├── app/
│   ├── page.tsx          # Главная страница (дашборд)
│   ├── orders/
│   │   └── page.tsx      # Страница заказов
│   ├── users/
│   │   └── page.tsx      # Страница пользователей
│   ├── partners/
│   │   └── page.tsx      # Страница партнеров
│   ├── clients/
│   │   └── page.tsx      # Страница клиентов партнеров
│   ├── layout.tsx        # Корневой layout
│   └── globals.css       # Глобальные стили
├── lib/
│   ├── supabase.ts       # Клиент Supabase (клиентский)
│   └── supabase-server.ts # Клиент Supabase (серверный, обходит RLS)
└── package.json
```

## Технологии

- Next.js 16
- React 19
- TypeScript
- Tailwind CSS
- Supabase (PostgreSQL)

## Примечания

- CRM система использует серверный клиент Supabase для обхода RLS политик
- Все данные загружаются напрямую из Supabase
- Порт по умолчанию: 3001 (чтобы не конфликтовать с основным приложением на 3000)
