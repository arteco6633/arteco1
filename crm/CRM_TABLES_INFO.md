# Информация о таблицах для CRM

## Ответ на вопрос: "Нужны ли дополнительные таблицы?"

**НЕТ, дополнительные таблицы не нужны!** 

CRM система использует те же таблицы, что и основное приложение:

### Существующие таблицы, которые использует CRM:

1. **`orders`** - Заказы
   - Структура может использовать JSONB поля (`contact`, `items`, `delivery`, `payment`)
   - Или отдельные поля (`order_number`, `user_name`, `user_phone`, `total_amount`, etc.)
   - CRM адаптирована для работы с обеими структурами

2. **`order_items`** - Товары заказа
   - Если товары хранятся в отдельной таблице
   - Или в JSONB поле `items` в таблице `orders`

3. **`users_local`** - Пользователи
   - Все зарегистрированные пользователи

4. **`partners`** - Партнеры
   - Все зарегистрированные партнеры

5. **`partner_clients`** - Клиенты партнеров
   - Все клиенты, добавленные партнерами

6. **`partner_orders`** - Заказы партнеров
   - Связь партнеров с заказами

7. **`partner_commissions`** - Комиссии партнеров
   - Комиссии, начисленные партнерам

### Структура данных:

CRM система автоматически адаптируется к структуре данных:
- Если данные в JSONB полях - парсит их
- Если данные в отдельных полях - использует их напрямую
- Если данные в связанных таблицах - делает JOIN запросы

### Преимущества использования одной базы:

1. ✅ Все данные в одном месте
2. ✅ Нет дублирования данных
3. ✅ Единая точка истины
4. ✅ Легче синхронизировать
5. ✅ Меньше сложности в управлении

### Что может понадобиться в будущем (опционально):

Если в будущем понадобятся дополнительные функции, можно добавить:
- `crm_notes` - Заметки CRM менеджеров к заказам/клиентам
- `crm_tasks` - Задачи для менеджеров
- `crm_communications` - История коммуникаций с клиентами

Но это не обязательно для базовой CRM системы.

