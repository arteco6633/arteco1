# –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –ò–ó SUPABASE

## üî¥ –¢–ï–ö–£–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö**: ~15 –ú–ë –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**:
1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–æ–≤**: 2-2.6 –ú–ë –∫–∞–∂–¥–æ–µ
2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–∞–ª–µ—Ä–µ–∏ –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤**: 2-2.6 –ú–ë –∫–∞–∂–¥–æ–µ  
3. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π**: 0.8-1.6 –ú–ë –∫–∞–∂–¥–æ–µ

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ**:
- –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ 15 –ú–ë –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è 10-30+ —Å–µ–∫—É–Ω–¥
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –¥–æ–ª–≥–æ –∂–¥–µ—Ç
- –í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Preview –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –µ—Å—Ç—å –ø–æ–ª–µ `cover_preview` –¥–ª—è –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤, –Ω–æ –æ–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å:

1. **–í —Å–ø–∏—Å–∫–µ –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cover_preview` –≤–º–µ—Å—Ç–æ `cover_image`
2. **–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞** –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ–ª–Ω–æ–µ `cover_image`
3. **Preview –æ–±—ã—á–Ω–æ –≤ 10-20 —Ä–∞–∑ –º–µ–Ω—å—à–µ** –ø–æ–ª–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (100-200 –ö–ë –≤–º–µ—Å—Ç–æ 2 –ú–ë)

### –ö–æ–¥ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```typescript
// –í app/page.tsx –¥–ª—è —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤
// –ë–´–õ–û:
<Image src={interior.cover_image} ... />

// –î–û–õ–ñ–ù–û –ë–´–¢–¨:
<Image 
  src={interior.cover_preview || interior.cover_image} 
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º preview –≤ —Å–ø–∏—Å–∫–µ, fallback –Ω–∞ –ø–æ–ª–Ω–æ–µ –µ—Å–ª–∏ –Ω–µ—Ç preview
  ...
/>
```

**–≠–∫–æ–Ω–æ–º–∏—è**: ~12 –ú–ë —Ç–æ–ª—å–∫–æ –Ω–∞ –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞—Ö!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –°–∂–∏–º–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

### –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

1. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä** —Ñ–∞–π–ª–∞ (—Å–µ–π—á–∞—Å –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
2. **–°–∂–∏–º–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –≤ Supabase
3. **–°–æ–∑–¥–∞–≤–∞—Ç—å preview –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (thumbnail 300-500px)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

```typescript
// –§—É–Ω–∫—Ü–∏—è —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
async function compressImage(file: File, maxWidth = 1920, quality = 0.85): Promise<File> {
  return new Promise((resolve) => {
    const reader = new FileReader()
    reader.onload = (e) => {
      const img = new Image()
      img.onload = () => {
        const canvas = document.createElement('canvas')
        let width = img.width
        let height = img.height
        
        // –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –µ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ
        if (width > maxWidth) {
          height = (height * maxWidth) / width
          width = maxWidth
        }
        
        canvas.width = width
        canvas.height = height
        
        const ctx = canvas.getContext('2d')!
        ctx.drawImage(img, 0, 0, width, height)
        
        canvas.toBlob(
          (blob) => {
            if (blob) {
              const compressedFile = new File([blob], file.name, {
                type: 'image/jpeg',
                lastModified: Date.now(),
              })
              resolve(compressedFile)
            } else {
              resolve(file)
            }
          },
          'image/jpeg',
          quality
        )
      }
      img.src = e.target?.result as string
    }
    reader.readAsDataURL(file)
  })
}

// –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è preview
async function createPreview(file: File, size = 500): Promise<File> {
  return new Promise((resolve) => {
    const reader = new FileReader()
    reader.onload = (e) => {
      const img = new Image()
      img.onload = () => {
        const canvas = document.createElement('canvas')
        canvas.width = size
        canvas.height = size
        
        const ctx = canvas.getContext('2d')!
        ctx.drawImage(img, 0, 0, size, size)
        
        canvas.toBlob(
          (blob) => {
            if (blob) {
              const previewFile = new File([blob], `preview-${file.name}`, {
                type: 'image/jpeg',
                lastModified: Date.now(),
              })
              resolve(previewFile)
            } else {
              resolve(file)
            }
          },
          'image/jpeg',
          0.8
        )
      }
      img.src = e.target?.result as string
    }
    reader.readAsDataURL(file)
  })
}
```

**–≠–∫–æ–Ω–æ–º–∏—è**: –ö–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç 200-500 –ö–ë –≤–º–µ—Å—Ç–æ 2-3 –ú–ë!

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 3: Lazy Loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å:

1. ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–ª—è –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤ (loading="lazy")
2. ‚ùå –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –±–∞–Ω–Ω–µ—Ä–æ–≤ (–∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–≥–æ)
3. ‚ùå –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏:

- **LCP —ç–ª–µ–º–µ–Ω—Ç** (–ø–µ—Ä–≤—ã–π –±–∞–Ω–Ω–µ—Ä): `priority={true}`, `fetchPriority="high"`
- **–í—ã—à–µ fold**: `loading="eager"` 
- **–ù–∏–∂–µ fold**: `loading="lazy"`

**–≠–∫–æ–Ω–æ–º–∏—è**: –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–∏–¥–∏—Ç —Å—Ä–∞–∑—É

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 4: Responsive Images

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:

```typescript
<Image
  src={imageUrl}
  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
  // –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º: –ø–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞ (100vw)
  // –ù–∞ –ø–ª–∞–Ω—à–µ—Ç–µ: –ø–æ–ª–æ–≤–∏–Ω–∞ (50vw)
  // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ: —Ç—Ä–µ—Ç—å (33vw)
/>
```

**–ü—Ä–æ–±–ª–µ–º–∞**: Next.js Image Optimization –æ—Ç–∫–ª—é—á–µ–Ω (`unoptimized: true`)

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Image Transform API –∏–ª–∏ CDN

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Supabase

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –∫—ç—à —Ç–æ–ª—å–∫–æ –Ω–∞ **1 —á–∞—Å** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç 15 –ú–ë –∫–∞–∂–¥—ã–π —á–∞—Å

### –†–µ—à–µ–Ω–∏–µ:

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Supabase Storage –ø–æ–ª–∏—Ç–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```sql
-- –í Supabase Dashboard ‚Üí Storage ‚Üí Settings
-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Cache-Control –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è bucket 'product':

-- –ß–µ—Ä–µ–∑ SQL (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω):
UPDATE storage.buckets 
SET file_size_limit = 5242880, -- 5 –ú–ë –º–∞–∫—Å–∏–º—É–º
    public = true
WHERE id = 'product';
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Supabase**:
1. Storage ‚Üí product bucket ‚Üí Settings
2. File size limit: 5 MB
3. Public: Yes
4. Cache Control: `public, max-age=31536000, immutable`

**–≠–∫–æ–Ω–æ–º–∏—è**: 11+ –ú–ë –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏—è—Ö (PageSpeed Insights –≥–æ–≤–æ—Ä–∏—Ç –æ–± —ç—Ç–æ–º)

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 6: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Image Transform API

Supabase –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –ª–µ—Ç—É!

### –ü—Ä–∏–º–µ—Ä:

```typescript
// –í–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
const imageUrl = `https://zijajicude.beget.app/storage/v1/object/public/product/banners/image.jpg`

// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é:
const optimizedUrl = `${imageUrl}?width=1200&quality=85&format=webp`
// width - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞
// quality - –∫–∞—á–µ—Å—Ç–≤–æ (0-100)
// format - webp –¥–ª—è –ª—É—á—à–µ–≥–æ —Å–∂–∞—Ç–∏—è
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞—é—Ç—Å—è
- ‚úÖ WebP —Ñ–æ—Ä–º–∞—Ç (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
- ‚úÖ Responsive —Ä–∞–∑–º–µ—Ä—ã
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –∞–¥–º–∏–Ω–∫–µ

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

–°–æ–∑–¥–∞—Ç—å helper —Ñ—É–Ω–∫—Ü–∏—é:

```typescript
// lib/image-optimizer.ts
export function getOptimizedImageUrl(
  originalUrl: string,
  width?: number,
  quality = 85
): string {
  if (!originalUrl || !originalUrl.includes('beget.app')) {
    return originalUrl
  }
  
  const params = new URLSearchParams()
  if (width) params.set('width', width.toString())
  params.set('quality', quality.toString())
  params.set('format', 'webp')
  
  return `${originalUrl}?${params.toString()}`
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
<Image
  src={getOptimizedImageUrl(banner.image_url, 1200, 85)}
  // –ü–æ–ª—É—á–∏–º: image.jpg?width=1200&quality=85&format=webp
/>
```

**–≠–∫–æ–Ω–æ–º–∏—è**: –ö–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤ 3-5 —Ä–∞–∑ –º–µ–Ω—å—à–µ!

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö: **15 –ú–ë**
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ 3G: **20-30 —Å–µ–∫—É–Ω–¥**
- LCP: **26 —Å–µ–∫—É–Ω–¥**

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö: **2-3 –ú–ë** (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤ 5-7 —Ä–∞–∑!)
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ 3G: **3-5 —Å–µ–∫—É–Ω–¥**
- LCP: **2-3 —Å–µ–∫—É–Ω–¥—ã**

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### üî¥ –ö–†–ò–¢–ò–ß–ù–û (–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å preview –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –¥–ª—è –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤ –≤ —Å–ø–∏—Å–∫–µ
2. **–î–æ–±–∞–≤–∏—Ç—å Supabase Image Transform** –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ Supabase Storage

### üü° –í–ê–ñ–ù–û (–≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):

4. **–°–∂–∏–º–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
5. **–°–æ–∑–¥–∞–≤–∞—Ç—å preview –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
6. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä** —Ñ–∞–π–ª–∞ –¥–æ 2 –ú–ë

---

## üìù –ß–¢–û –¢–ê–ö–û–ï "beget.app: 14.4 –ú–ë"

–≠—Ç–æ **–ù–ï –æ–¥–∏–Ω —Ñ–∞–π–ª**, –∞ **—Å—É–º–º–∞ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** –∫ –¥–æ–º–µ–Ω—É `zijajicude.beget.app`:
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–æ–≤
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—å–µ—Ä–æ–≤  
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ, JavaScript —Ñ–∞–π–ª—ã –µ—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å

**–†–µ—à–µ–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É –≤—ã—à–µ.

