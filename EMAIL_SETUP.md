# Настройка Email уведомлений

Система автоматически отправляет email уведомления клиентам при:
1. **Создании заказа** - письмо с благодарностью и номером заказа
2. **Изменении статуса заказа в CRM** - уведомление о новом статусе

## Настройка SMTP

Добавьте следующие переменные окружения в файл `.env.local`:

```env
# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@arteco.ru
```

### Настройка для Gmail

1. Включите двухфакторную аутентификацию в вашем Google аккаунте
2. Создайте пароль приложения:
   - Перейдите в [Настройки аккаунта Google](https://myaccount.google.com/)
   - Безопасность → Двухэтапная аутентификация → Пароли приложений
   - Создайте новый пароль приложения для "Почта"
   - Используйте этот пароль в `SMTP_PASSWORD`

### Настройка для других SMTP серверов

Используйте параметры вашего почтового сервера:
- **SMTP_HOST** - адрес SMTP сервера (например, `smtp.your-domain.com`)
- **SMTP_PORT** - порт SMTP (обычно 587 для TLS или 465 для SSL)
- **SMTP_USER** - имя пользователя для SMTP
- **SMTP_PASSWORD** - пароль для SMTP
- **SMTP_FROM** - адрес отправителя (будет отображаться в письмах)

## Статусы заказов

Система отправляет уведомления при изменении статуса на:
- `new` - Новый заказ
- `processing` - В обработке
- `pending` - Ожидает
- `delivered` - Доставлен
- `completed` - Завершен
- `cancelled` - Отменен

## Важно

- Email отправляется только если клиент указал email при оформлении заказа
- Если SMTP не настроен, система продолжит работать, но email не будут отправляться (ошибки логируются в консоль)
- Письма отправляются асинхронно и не блокируют создание/обновление заказа

