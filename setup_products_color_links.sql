-- Добавление поля color_products для хранения связей товаров по цветам
-- Формат: JSONB объект, где ключ - индекс цвета, значение - ID связанного товара
-- Пример: {"0": 45, "1": 46, "2": 47} означает, что:
--   - цвет с индексом 0 связан с товаром ID 45
--   - цвет с индексом 1 связан с товаром ID 46
--   - цвет с индексом 2 связан с товаром ID 47

ALTER TABLE products 
ADD COLUMN IF NOT EXISTS color_products JSONB DEFAULT '{}'::jsonb;

-- Комментарий к полю
COMMENT ON COLUMN products.color_products IS 'Связи товаров по цветам: ключ - индекс цвета, значение - ID связанного товара';

