# Настройка оплаты через T-Bank (Т-Банк)

## Описание

Интеграция интернет-эквайринга T-Bank позволяет принимать платежи картами, через СБП, T-Pay, SberPay, Mir Pay, Alfa Pay и другими способами.

## Шаги подключения

### 1. Подача заявки на подключение

1. Перейдите на [сайт T-Bank](https://www.tbank.ru) и заполните заявку на подключение интернет-эквайринга
2. После рассмотрения заявки с вами свяжется представитель банка для заключения договора

### 2. Получение реквизитов

После одобрения заявки вы получите доступ к личному кабинету интернет-эквайринга, где будут доступны:

- **TerminalKey** (Terminal ID) - идентификатор терминала
- **SecretKey** (Password) - секретный ключ для подписи запросов

### 3. Настройка переменных окружения

Добавьте следующие переменные в ваш `.env.local` файл:

```env
# T-Bank Configuration
TBANK_TERMINAL_ID=your_terminal_id_here
TBANK_PASSWORD=your_secret_key_here
TBANK_API_URL=https://securepay.tinkoff.ru/v2/Init
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
```

**Для тестирования** используйте тестовые данные из личного кабинета:
- Terminal ID: `1763021044538DEMO`
- Password: `Nfj!60bSZi1VCv*n`

### 4. Настройка в Vercel (если используется)

Добавьте те же переменные окружения в настройках проекта Vercel:
1. Перейдите в Settings → Environment Variables
2. Добавьте все переменные из пункта 3

### 5. Тестирование

1. Создайте тестовый заказ на сайте
2. Выберите способ оплаты "Оплата картой онлайн"
3. Вы будете перенаправлены на страницу оплаты T-Bank
4. Используйте тестовые карты для проверки:
   - Успешная оплата: `4111111111111111`
   - Отклоненная оплата: `4000000000000002`

## Структура интеграции

### API Routes

- `/api/payments/tbank/create` - создание платежа
- `/api/payments/tbank/callback` - обработка callback от банка

### Страницы

- `/order/success` - страница успешной оплаты
- `/order/fail` - страница неудачной оплаты

## Как это работает

1. Пользователь оформляет заказ и выбирает "Оплата картой онлайн"
2. Система создает заказ в базе данных
3. Система создает платеж в T-Bank через API
4. Пользователь перенаправляется на страницу оплаты T-Bank
5. После оплаты T-Bank отправляет callback на `/api/payments/tbank/callback`
6. Система обновляет статус заказа в базе данных
7. Пользователь перенаправляется на страницу успеха или ошибки

## Документация

Подробная документация API доступна на [портале разработчика T-Bank](https://developer.tbank.ru/eacq/intro)

## Поддержка

При возникновении проблем:
1. Проверьте правильность Terminal ID и Password
2. Убедитесь, что `NEXT_PUBLIC_SITE_URL` указан корректно
3. Проверьте логи в таблице `payment_logs` в базе данных
4. Обратитесь в поддержку T-Bank


## Описание

Интеграция интернет-эквайринга T-Bank позволяет принимать платежи картами, через СБП, T-Pay, SberPay, Mir Pay, Alfa Pay и другими способами.

## Шаги подключения

### 1. Подача заявки на подключение

1. Перейдите на [сайт T-Bank](https://www.tbank.ru) и заполните заявку на подключение интернет-эквайринга
2. После рассмотрения заявки с вами свяжется представитель банка для заключения договора

### 2. Получение реквизитов

После одобрения заявки вы получите доступ к личному кабинету интернет-эквайринга, где будут доступны:

- **TerminalKey** (Terminal ID) - идентификатор терминала
- **SecretKey** (Password) - секретный ключ для подписи запросов

### 3. Настройка переменных окружения

Добавьте следующие переменные в ваш `.env.local` файл:

```env
# T-Bank Configuration
TBANK_TERMINAL_ID=your_terminal_id_here
TBANK_PASSWORD=your_secret_key_here
TBANK_API_URL=https://securepay.tinkoff.ru/v2/Init
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
```

**Для тестирования** используйте тестовые данные из личного кабинета:
- Terminal ID: `1763021044538DEMO`
- Password: `Nfj!60bSZi1VCv*n`

### 4. Настройка в Vercel (если используется)

Добавьте те же переменные окружения в настройках проекта Vercel:
1. Перейдите в Settings → Environment Variables
2. Добавьте все переменные из пункта 3

### 5. Тестирование

1. Создайте тестовый заказ на сайте
2. Выберите способ оплаты "Оплата картой онлайн"
3. Вы будете перенаправлены на страницу оплаты T-Bank
4. Используйте тестовые карты для проверки:
   - Успешная оплата: `4111111111111111`
   - Отклоненная оплата: `4000000000000002`

## Структура интеграции

### API Routes

- `/api/payments/tbank/create` - создание платежа
- `/api/payments/tbank/callback` - обработка callback от банка

### Страницы

- `/order/success` - страница успешной оплаты
- `/order/fail` - страница неудачной оплаты

## Как это работает

1. Пользователь оформляет заказ и выбирает "Оплата картой онлайн"
2. Система создает заказ в базе данных
3. Система создает платеж в T-Bank через API
4. Пользователь перенаправляется на страницу оплаты T-Bank
5. После оплаты T-Bank отправляет callback на `/api/payments/tbank/callback`
6. Система обновляет статус заказа в базе данных
7. Пользователь перенаправляется на страницу успеха или ошибки

## Документация

Подробная документация API доступна на [портале разработчика T-Bank](https://developer.tbank.ru/eacq/intro)

## Поддержка

При возникновении проблем:
1. Проверьте правильность Terminal ID и Password
2. Убедитесь, что `NEXT_PUBLIC_SITE_URL` указан корректно
3. Проверьте логи в таблице `payment_logs` в базе данных
4. Обратитесь в поддержку T-Bank


## Описание

Интеграция интернет-эквайринга T-Bank позволяет принимать платежи картами, через СБП, T-Pay, SberPay, Mir Pay, Alfa Pay и другими способами.

## Шаги подключения

### 1. Подача заявки на подключение

1. Перейдите на [сайт T-Bank](https://www.tbank.ru) и заполните заявку на подключение интернет-эквайринга
2. После рассмотрения заявки с вами свяжется представитель банка для заключения договора

### 2. Получение реквизитов

После одобрения заявки вы получите доступ к личному кабинету интернет-эквайринга, где будут доступны:

- **TerminalKey** (Terminal ID) - идентификатор терминала
- **SecretKey** (Password) - секретный ключ для подписи запросов

### 3. Настройка переменных окружения

Добавьте следующие переменные в ваш `.env.local` файл:

```env
# T-Bank Configuration
TBANK_TERMINAL_ID=your_terminal_id_here
TBANK_PASSWORD=your_secret_key_here
TBANK_API_URL=https://securepay.tinkoff.ru/v2/Init
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
```

**Для тестирования** используйте тестовые данные из личного кабинета:
- Terminal ID: `1763021044538DEMO`
- Password: `Nfj!60bSZi1VCv*n`

### 4. Настройка в Vercel (если используется)

Добавьте те же переменные окружения в настройках проекта Vercel:
1. Перейдите в Settings → Environment Variables
2. Добавьте все переменные из пункта 3

### 5. Тестирование

1. Создайте тестовый заказ на сайте
2. Выберите способ оплаты "Оплата картой онлайн"
3. Вы будете перенаправлены на страницу оплаты T-Bank
4. Используйте тестовые карты для проверки:
   - Успешная оплата: `4111111111111111`
   - Отклоненная оплата: `4000000000000002`

## Структура интеграции

### API Routes

- `/api/payments/tbank/create` - создание платежа
- `/api/payments/tbank/callback` - обработка callback от банка

### Страницы

- `/order/success` - страница успешной оплаты
- `/order/fail` - страница неудачной оплаты

## Как это работает

1. Пользователь оформляет заказ и выбирает "Оплата картой онлайн"
2. Система создает заказ в базе данных
3. Система создает платеж в T-Bank через API
4. Пользователь перенаправляется на страницу оплаты T-Bank
5. После оплаты T-Bank отправляет callback на `/api/payments/tbank/callback`
6. Система обновляет статус заказа в базе данных
7. Пользователь перенаправляется на страницу успеха или ошибки

## Документация

Подробная документация API доступна на [портале разработчика T-Bank](https://developer.tbank.ru/eacq/intro)

## Поддержка

При возникновении проблем:
1. Проверьте правильность Terminal ID и Password
2. Убедитесь, что `NEXT_PUBLIC_SITE_URL` указан корректно
3. Проверьте логи в таблице `payment_logs` в базе данных
4. Обратитесь в поддержку T-Bank


## Описание

Интеграция интернет-эквайринга T-Bank позволяет принимать платежи картами, через СБП, T-Pay, SberPay, Mir Pay, Alfa Pay и другими способами.

## Шаги подключения

### 1. Подача заявки на подключение

1. Перейдите на [сайт T-Bank](https://www.tbank.ru) и заполните заявку на подключение интернет-эквайринга
2. После рассмотрения заявки с вами свяжется представитель банка для заключения договора

### 2. Получение реквизитов

После одобрения заявки вы получите доступ к личному кабинету интернет-эквайринга, где будут доступны:

- **TerminalKey** (Terminal ID) - идентификатор терминала
- **SecretKey** (Password) - секретный ключ для подписи запросов

### 3. Настройка переменных окружения

Добавьте следующие переменные в ваш `.env.local` файл:

```env
# T-Bank Configuration
TBANK_TERMINAL_ID=your_terminal_id_here
TBANK_PASSWORD=your_secret_key_here
TBANK_API_URL=https://securepay.tinkoff.ru/v2/Init
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
```

**Для тестирования** используйте тестовые данные из личного кабинета:
- Terminal ID: `1763021044538DEMO`
- Password: `Nfj!60bSZi1VCv*n`

### 4. Настройка в Vercel (если используется)

Добавьте те же переменные окружения в настройках проекта Vercel:
1. Перейдите в Settings → Environment Variables
2. Добавьте все переменные из пункта 3

### 5. Тестирование

1. Создайте тестовый заказ на сайте
2. Выберите способ оплаты "Оплата картой онлайн"
3. Вы будете перенаправлены на страницу оплаты T-Bank
4. Используйте тестовые карты для проверки:
   - Успешная оплата: `4111111111111111`
   - Отклоненная оплата: `4000000000000002`

## Структура интеграции

### API Routes

- `/api/payments/tbank/create` - создание платежа
- `/api/payments/tbank/callback` - обработка callback от банка

### Страницы

- `/order/success` - страница успешной оплаты
- `/order/fail` - страница неудачной оплаты

## Как это работает

1. Пользователь оформляет заказ и выбирает "Оплата картой онлайн"
2. Система создает заказ в базе данных
3. Система создает платеж в T-Bank через API
4. Пользователь перенаправляется на страницу оплаты T-Bank
5. После оплаты T-Bank отправляет callback на `/api/payments/tbank/callback`
6. Система обновляет статус заказа в базе данных
7. Пользователь перенаправляется на страницу успеха или ошибки

## Документация

Подробная документация API доступна на [портале разработчика T-Bank](https://developer.tbank.ru/eacq/intro)

## Поддержка

При возникновении проблем:
1. Проверьте правильность Terminal ID и Password
2. Убедитесь, что `NEXT_PUBLIC_SITE_URL` указан корректно
3. Проверьте логи в таблице `payment_logs` в базе данных
4. Обратитесь в поддержку T-Bank


## Описание

Интеграция интернет-эквайринга T-Bank позволяет принимать платежи картами, через СБП, T-Pay, SberPay, Mir Pay, Alfa Pay и другими способами.

## Шаги подключения

### 1. Подача заявки на подключение

1. Перейдите на [сайт T-Bank](https://www.tbank.ru) и заполните заявку на подключение интернет-эквайринга
2. После рассмотрения заявки с вами свяжется представитель банка для заключения договора

### 2. Получение реквизитов

После одобрения заявки вы получите доступ к личному кабинету интернет-эквайринга, где будут доступны:

- **TerminalKey** (Terminal ID) - идентификатор терминала
- **SecretKey** (Password) - секретный ключ для подписи запросов

### 3. Настройка переменных окружения

Добавьте следующие переменные в ваш `.env.local` файл:

```env
# T-Bank Configuration
TBANK_TERMINAL_ID=your_terminal_id_here
TBANK_PASSWORD=your_secret_key_here
TBANK_API_URL=https://securepay.tinkoff.ru/v2/Init
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
```

**Для тестирования** используйте тестовые данные из личного кабинета:
- Terminal ID: `1763021044538DEMO`
- Password: `Nfj!60bSZi1VCv*n`

### 4. Настройка в Vercel (если используется)

Добавьте те же переменные окружения в настройках проекта Vercel:
1. Перейдите в Settings → Environment Variables
2. Добавьте все переменные из пункта 3

### 5. Тестирование

1. Создайте тестовый заказ на сайте
2. Выберите способ оплаты "Оплата картой онлайн"
3. Вы будете перенаправлены на страницу оплаты T-Bank
4. Используйте тестовые карты для проверки:
   - Успешная оплата: `4111111111111111`
   - Отклоненная оплата: `4000000000000002`

## Структура интеграции

### API Routes

- `/api/payments/tbank/create` - создание платежа
- `/api/payments/tbank/callback` - обработка callback от банка

### Страницы

- `/order/success` - страница успешной оплаты
- `/order/fail` - страница неудачной оплаты

## Как это работает

1. Пользователь оформляет заказ и выбирает "Оплата картой онлайн"
2. Система создает заказ в базе данных
3. Система создает платеж в T-Bank через API
4. Пользователь перенаправляется на страницу оплаты T-Bank
5. После оплаты T-Bank отправляет callback на `/api/payments/tbank/callback`
6. Система обновляет статус заказа в базе данных
7. Пользователь перенаправляется на страницу успеха или ошибки

## Документация

Подробная документация API доступна на [портале разработчика T-Bank](https://developer.tbank.ru/eacq/intro)

## Поддержка

При возникновении проблем:
1. Проверьте правильность Terminal ID и Password
2. Убедитесь, что `NEXT_PUBLIC_SITE_URL` указан корректно
3. Проверьте логи в таблице `payment_logs` в базе данных
4. Обратитесь в поддержку T-Bank

