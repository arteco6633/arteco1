# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –±–∞–Ω–Ω–µ—Ä–æ–≤ –≤ Storage

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ë–∞–Ω–Ω–µ—Ä—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Storage, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. **–ö–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ –±–∞–∫–µ—Ç `'product'`, –∞ —Å–æ–∑–¥–∞–Ω –±–∞–∫–µ—Ç `'banners'`**
2. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–∞–∫–µ—Ç–∞ `'banners'` –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã**

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–∞–∫–µ—Ç–∞ `banners`

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí **SQL Editor**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `setup_storage_banners.sql`

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç/–æ–±–Ω–æ–≤–∏—Ç:
- ‚úÖ –ë–∞–∫–µ—Ç `banners` (–µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç)
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è, –∑–∞–≥—Ä—É–∑–∫–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

–ö–æ–¥ –±—ã–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω:
- ‚úÖ –ó–∞–º–µ–Ω–∞ `.from('product')` ‚Üí `.from('banners')`
- ‚úÖ –£–±—Ä–∞–Ω–∞ –ø–æ–¥–ø–∞–ø–∫–∞ `banners/` –∏–∑ –ø—É—Ç–∏ (—Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä—è–º–æ –≤ –∫–æ—Ä–µ–Ω—å –±–∞–∫–µ—Ç–∞)

### –®–∞–≥ 3: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git add app/admin/banners/page.tsx setup_storage_banners.sql FIX_STORAGE_BANNERS.md
git commit -m "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∑–∞–≥—Ä—É–∑–∫–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–∫–µ—Ç 'banners'"
git push
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å `/admin/banners`
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –±–∞–Ω–Ω–µ—Ä —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase Storage ‚Üí `banners` - —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É - –±–∞–Ω–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

---

## üìã –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ

**–ë—ã–ª–æ:**
```typescript
.from('product')  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–∫–µ—Ç
const filePath = `banners/${fileName}`  // ‚ùå –õ–∏—à–Ω—è—è –ø–æ–¥–ø–∞–ø–∫–∞
```

**–°—Ç–∞–ª–æ:**
```typescript
.from('banners')  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–∫–µ—Ç
const filePath = fileName  // ‚úÖ –ë–µ–∑ –ø–æ–¥–ø–∞–ø–∫–∏
```

---

## üîç –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
   ```sql
   SELECT policyname, cmd, qual
   FROM pg_policies
   WHERE schemaname = 'storage' 
       AND tablename = 'objects' 
       AND policyname LIKE '%–±–∞–Ω–Ω–µ—Ä–æ–≤%';
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∫–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
   ```sql
   SELECT id, name, public FROM storage.buckets WHERE id = 'banners';
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)** - —Ç–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫

4. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–æ–≤—ã–π Supabase –ø—Ä–æ–µ–∫—Ç)
